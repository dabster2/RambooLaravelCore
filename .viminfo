# This viminfo file was generated by Vim 7.4.
# You may edit it if you're careful!

# Value of 'encoding' when this file was written
*encoding=utf-8


# hlsearch on (H) or off (h):
~h
# Last Search Pattern:
~MSle0~/placeO

# Command Line History (newest to oldest):
:wq
:q
:a

# Search String History (newest to oldest):
?/placeO
?/place
?/AJ
?/Aj
?/ven

# Expression History (newest to oldest):

# Input Line History (newest to oldest):

# Input Line History (newest to oldest):

# Registers:
""0	CHAR	0
	def notify_managers_about_new_order(order):
	    assert isinstance(order, Order)
	
	300
<    table= [ [orderedOffer.good.name, orderedOffer.pack_helper.name, currency(orderedOffer.price_discounted_frozen_per_unit),orderedOffer.pack_helper.total ,orderedOffer.amount, currency(orderedOffer.amount*orderedOffer.price_discounted_frozen)] for orderedOffer in  order.orderedoffer_set.all() ]
	    tbl=tabulate(table, headers=["Заказ","Ед.", "Цена за шт.", "Шт. в ед.", "Кол-во" , "Cумма"])
	
	    #for manager in order.user.supervisor.all():
	    for manager in Profile.objects.filter(clients__in=[order.user]):
	
	        send_templated_mail(
	            template_name='new_order',
	            from_email=settings.SERVER_EMAIL,
	            recipient_list=[manager.user.email],
	            context={
	                'manager_full_name':safe_user_name(manager.user),
	                'customer_full_name':safe_user_name(order.user),
	                'order':order,
	                'order_tabled':tbl,
	            },
	            # Optional:
	            # cc=['cc@example.com'],
	            # bcc=['bcc@example.com'],
	            # headers={'My-Custom-Header':'Custom Value'},
	            # template_prefix="my_emails/",
	            # template_suffix="email",
	        )
	    else:
	        for manager in User.objects.filter(groups__name__in=['Head sales']):
	            send_templated_mail(
	            template_name='new_order',
	            from_email=settings.SERVER_EMAIL,
	            recipient_list=[manager.email],
	            context={
	                'manager_full_name':safe_user_name(manager),
	                'customer_full_name':safe_user_name(order.user),
	                'order':order,
	                'order_tabled':tbl,
	            },
	            # Optional:
	            # cc=['cc@example.com'],
	            # bcc=['bcc@example.com'],
	            # headers={'My-Custom-Header':'Custom Value'},
	            # template_prefix="my_emails/",
	            # template_suffix="email",
	            )

# File marks:
'0  106  0  /var/www/grostyle/grostyle/base/lib/mailerService.py
'1  58  16  /var/www/grostyle/grostyle/base/lib/mailerService.py
'2  58  262  /var/www/grostyle/grostyle/base/lib/mailerService.py
'3  148  4  /var/www/grostyle/grostyle/base/views/ajax.py
'4  150  4  /var/www/grostyle/grostyle/base/views/ajax.py
'5  58  76  /var/www/grostyle/grostyle/base/lib/mailerService.py
'6  15  3  /var/www/grostyle/grostyle/base/lib/mailerService.py
'7  81  0  /var/www/grostyle/grostyle/base/views/ajax.py
'8  1  0  /var/www/grostyle/grostyle/base/views/a
'9  432  4  /var/www/grostyle/grostyle/base/views/views.py

# Jumplist (newest first):
-'  106  0  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  1  0  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  58  16  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  148  4  /var/www/grostyle/grostyle/base/views/ajax.py
-'  1  0  /var/www/grostyle/grostyle/base/views/ajax.py
-'  150  4  /var/www/grostyle/grostyle/base/views/ajax.py
-'  15  3  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  81  0  /var/www/grostyle/grostyle/base/views/ajax.py
-'  1  0  /var/www/grostyle/grostyle/base/views/a
-'  432  4  /var/www/grostyle/grostyle/base/views/views.py
-'  1  0  /var/www/grostyle/grostyle/base/views/views.py
-'  1  0  /var/www/grostyle/grostyle/base/ajax.py
-'  61  29  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  12  0  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  56  0  /var/www/grostyle/grostyle/base/models.py
-'  1  0  /var/www/grostyle/grostyle/base/models.py
-'  28  16  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  4  42  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  43  31  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  23  0  /var/www/grostyle/grostyle/base/lib/mailerService.py
-'  5  0  /var/www/grostyle/grostyle/grostyle/settings/local.py
-'  1  0  /var/www/grostyle/grostyle/grostyle/settings/local.py
-'  22  1  /var/www/grostyle/grostyle/.gitignore
-'  1  0  /var/www/grostyle/grostyle/.gitignore
-'  1  0  /var/www/grostyle/grostyle/vendors/django-suit/.gitignore
-'  33  0  /var/www/grostyle/grostyle/.gitignore
-'  6  0  /var/www/grostyle/grostyle/.gitignore
-'  4  8  /var/www/grostyle/.gitignore
-'  1  0  /var/www/grostyle/.gitignore
-'  3  4  /var/www/grostyle/.gitignore
-'  1  0  /var/www/grostyle/grostyle/celery.sh
-'  1  0  /var/www/grostyle/i.sh
-'  1  0  /var/www/grostyle/ve.sh
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/ve.sh
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/i.sh
-'  1  0  /var/www/grostyle/ve.sh
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/ve.sh
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/deploy.sh
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/manage.py
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/uwsgi.ini
-'  1  0  /var/www/grostyle/grostyle/celery.sh
-'  1  0  /var/www/grostyle/i.sh

# History of marks within files (newest to oldest):

> /var/www/grostyle/grostyle/base/lib/mailerService.py
	"	106	0
	^	106	0
	.	106	0
	+	20	48
	+	21	67
	+	40	9
	+	42	0
	+	41	75
	+	42	3
	+	58	7
	+	47	58
	+	45	36
	+	3	38
	+	4	42
	+	59	0
	+	60	15
	+	62	0
	+	61	29
	+	13	0
	+	15	0
	+	59	2
	+	106	3
	+	16	7
	+	17	7
	+	18	7
	+	20	6
	+	21	6
	+	23	10
	+	24	14
	+	25	15
	+	26	15
	+	27	15
	+	39	11
	+	40	7
	+	41	11
	+	42	15
	+	43	15
	+	44	15
	+	45	15
	+	46	15
	+	51	15
	+	58	17
	+	58	206
	+	58	249
	+	58	76
	+	58	118
	+	58	144
	+	58	210
	+	58	262
	+	58	116
	+	16	7
	+	59	0
	+	106	0

> /var/www/grostyle/grostyle/base/views/ajax.py
	"	148	4
	^	148	4
	.	148	4
	+	148	4

> /var/www/grostyle/grostyle/base/views/a
	"	1	0

> /var/www/grostyle/grostyle/base/views/views.py
	"	432	4

> /var/www/grostyle/grostyle/base/ajax.py
	"	1	0

> /var/www/grostyle/grostyle/base/models.py
	"	56	0

> /var/www/grostyle/grostyle/grostyle/settings/local.py
	"	5	0

> /var/www/grostyle/grostyle/.gitignore
	"	22	1
	^	22	2
	.	22	1
	+	22	1

> /var/www/grostyle/grostyle/vendors/django-suit/.gitignore
	"	1	0

> /var/www/grostyle/.gitignore
	"	4	8
	^	4	9
	.	4	8
	+	1	5
	+	3	5
	+	4	8

> /var/www/grostyle/grostyle/celery.sh
	"	1	0

> /var/www/grostyle/i.sh
	"	1	0

> /var/www/grostyle/ve.sh
	"	1	0

> /var/www/grostyle/deploy.sh
	"	1	0

> /var/www/grostyle/grostyle/manage.py
	"	1	0

> /var/www/grostyle/grostyle/uwsgi.ini
	"	1	0
